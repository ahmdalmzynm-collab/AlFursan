<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="refresh" content="5"> <title>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„ÙØ±Ø³Ø§Ù† | Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #f0f2f5; margin: 0; padding: 20px; text-align: right; }
        .admin-container { max-width: 1100px; margin: auto; background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); }
        h1 { color: #131921; border-bottom: 3px solid #febd69; padding-bottom: 10px; margin-bottom: 20px; }
        
        /* ØªÙ†Ø³ÙŠÙ‚ ÙÙˆØ±Ù… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª */
        .add-product-box { background: #f8f9fa; padding: 20px; border-radius: 8px; border: 1px solid #ddd; margin-bottom: 30px; }
        .grid-form { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; }
        input, select { padding: 10px; border: 1px solid #ccc; border-radius: 5px; width: 100%; box-sizing: border-box; }
        .btn-add { background: #27ae60; color: white; border: none; padding: 12px; font-weight: bold; cursor: pointer; border-radius: 5px; grid-column: 1 / -1; }
        
        /* ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„ */
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th, td { padding: 12px; border: 1px solid #eee; text-align: center; }
        th { background: #232f3e; color: white; }
        .order-row { background: #fffdf0; border-right: 5px solid #e67e22; }
        .product-img { width: 50px; height: 50px; object-fit: cover; border-radius: 5px; }
        .delete-btn { background: #ff4d4d; color: white; padding: 5px 10px; text-decoration: none; border-radius: 4px; font-size: 12px; }
    </style>
</head>
<body>

<div class="admin-container">
    <h1>Ù„ÙˆØ­Ø© Ø¥Ø¯Ø§Ø±Ø© Ù…Ø±ÙƒØ² Ø§Ù„ÙØ±Ø³Ø§Ù† ğŸ</h1>
    <p>ğŸ“ Ø¨Ù†ÙŠ Ø³ÙˆÙŠÙ - Ø´Ø§Ø±Ø¹ Ø¹Ø¨Ø¯ Ø§Ù„Ø³Ù„Ø§Ù… Ø¹Ø§Ø±Ù | <span style="color: green;">Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ù…ØªØµÙ„ Ø§Ù„Ø¢Ù† ÙˆÙŠØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ« ÙƒÙ„ 5 Ø«ÙˆØ§Ù†ÙŠ</span></p>

    <div class="add-product-box">
        <h3>â• Ø¥Ø¶Ø§ÙØ© ØµÙ†Ù Ø¬Ø¯ÙŠØ¯ Ù„Ù„Ù…Ø®Ø²Ù†</h3>
        <form action="/add-product" method="POST" class="grid-form">
            <input type="text" name="name" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬ (Ù…Ø«Ù„Ø§Ù‹: ÙƒØ§ÙˆØªØ´ Ù„Ø§Ø³Ø§)" required>
            <input type="number" name="price" placeholder="Ø§Ù„Ø³Ø¹Ø±" required>
            <input type="text" name="size" placeholder="Ø§Ù„Ù…Ù‚Ø§Ø³" required>
            <select name="category">
                <option value="Ø¥Ø·Ø§Ø±Ø§Øª">Ø¥Ø·Ø§Ø±Ø§Øª</option>
                <option value="Ø¨Ø·Ø§Ø±ÙŠØ§Øª">Ø¨Ø·Ø§Ø±ÙŠØ§Øª</option>
                <option value="Ø¬Ù†ÙˆØ·">Ø¬Ù†ÙˆØ·</option>
            </select>
            <input type="text" name="img" placeholder="Ø±Ø§Ø¨Ø· ØµÙˆØ±Ø© Ø§Ù„Ù…Ù†ØªØ¬ (URL)">
            <button type="submit" class="btn-add">ØªØ£ÙƒÙŠØ¯ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ù„Ù„Ù…ØªØ¬Ø± âœ…</button>
        </form>
    </div>

    <div style="margin-top: 40px;">
        <h3 style="color: #e67e22;">ğŸ“¥ Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø²Ø¨Ø§Ø¦Ù† (Ø§Ù„Ø£ÙˆØ±Ø¯Ø±Ø§Øª)</h3>
        <table>
            <thead>
                <tr>
                    <th>Ø§Ù„ÙˆÙ‚Øª</th>
                    <th>Ø§Ù„Ø²Ø¨ÙˆÙ†</th>
                    <th>Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„</th>
                    <th>Ø§Ù„Ø·Ù„Ø¨Ø§Øª</th>
                    <th>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</th>
                </tr>
            </thead>
            <tbody>
                <% if (orders && orders.length > 0) { %>
    <% orders.reverse().forEach(order => { %>
        <tr class="order-row">
            <td><%= order.date %></td>
            <td><b><%= order.name %></b></td>
            <td><a href="tel:<%= order.phone %>"><%= order.phone %></a></td>
            <td>
                <% if (order.items && Array.isArray(order.items)) { %>
                    <% order.items.forEach(item => { %>
                        â€¢ <%= item.name %> (<%= item.size %>)<br>
                    <% }) %>
                <% } else { %>
                    <span style="color: red;">Ø·Ù„Ø¨ Ù‚Ø¯ÙŠÙ… (Ø¨Ø¯ÙˆÙ† Ø³Ù„Ø©)</span>
                <% } %>
            </td>
            <td><%= order.address %></td>
        </tr>
    <% }) %>
<% } else { %>
    <tr><td colspan="5">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ø¬Ø¯ÙŠØ¯Ø© Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†</td></tr>
<% } %>
            </tbody>
        </table>
    </div>

    <div style="margin-top: 40px;">
        <h3 style="color: #7f8c8d;">ğŸ“¦ Ø¨Ø¶Ø§Ø¹Ø© Ø§Ù„Ù…Ø­Ù„ Ø§Ù„Ø­Ø§Ù„ÙŠØ©</h3>
        <table>
            <thead>
                <tr>
                    <th>Ø§Ù„ØµÙˆØ±Ø©</th>
                    <th>Ø§Ù„Ø§Ø³Ù…</th>
                    <th>Ø§Ù„Ù…Ù‚Ø§Ø³</th>
                    <th>Ø§Ù„Ø³Ø¹Ø±</th>
                    <th>ØªØ­ÙƒÙ…</th>
                </tr>
            </thead>
            <tbody>
                <% products.forEach(p => { %>
                    <tr>
                        <td><img src="<%= p.img %>" class="product-img" onerror="this.src='https://via.placeholder.com/50'"></td>
                        <td><%= p.name %></td>
                        <td><%= p.size %></td>
                        <td><%= p.price %> Ø¬.Ù…</td>
                        <td><a href="/delete-product/<%= p.id %>" class="delete-btn" onclick="return confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ù…Ø³Ø­ Ù‡Ø°Ø§ Ø§Ù„ØµÙ†ÙØŸ')">Ø­Ø°Ù</a></td>
                    </tr>
                <% }) %>
            </tbody>
        </table>
    </div>
</div>

</body>
</html>